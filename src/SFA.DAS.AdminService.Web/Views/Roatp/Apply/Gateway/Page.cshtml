@model SFA.DAS.AdminService.Web.ViewModels.Roatp.Gateway.RoatpGatewayPageViewModel

@{
    ViewBag.Title = $"Gateway - {Model.Heading}";
    Layout = "_Layout";
    var isError = Model.ErrorMessages != null && Model.ErrorMessages.Count > 0 ? "govuk-input--error" : "";

}

@if (Model.ErrorMessages != null && Model.ErrorMessages.Count > 0)
{
    foreach (var errorMessage in Model.ErrorMessages)
    {
        if (errorMessage.Field == Model.PageId)
        {
            <span class="govuk-error-message">@Html.Raw(errorMessage.ErrorMessage)</span>
        }
    }
}
<a asp-action="InProgressApplications" asp-controller="RoatpGateway" class="govuk-back-link">Back</a>
<main class="govuk-main-wrapper " id="main-content" role="main">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            @*@if (!ViewData.ModelState.IsValid)
                {
                    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="error-summary">
                        <h2 class="govuk-error-summary__title" id="error-summary-title">
                            There is a problem
                        </h2>
                        <div class="govuk-error-summary__body">
                            <ul class="govuk-list govuk-error-summary__list">
                                <li><a sfa-validation-for="IsGatewayApproved"></a></li>
                            </ul>
                        </div>
                    </div>
                }*@

            @if (Model.Caption != null)
            {
                <caption>
                    @Model.Caption
                </caption>
            }
            <h1 class="govuk-heading-xl">@Model.Heading</h1>
            @if (Model?.TextListing?.DataRows!=null)
           {
                <div>
                    @foreach (var row in Model.TextListing.DataRows)
                    {
                        <div>
                            @foreach (var column in row.Columns)
                            {
                                @Html.Raw(column)
                            }
                        </div>
                    }
                </div>
            }


            @foreach (var table in Model.Tables)
            {
                <table class="govuk-table">
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            @foreach (var heading in table.HeadingTitles)
                            {
                                <th class="govuk-table__header" scope="col">@heading</th>
                            }
                        </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                        @foreach (var dataRow in table.DataRows)
                        {
                            <tr class="govuk-table__row">

                                @foreach (var column in dataRow.Columns)
                                {
                                    <td class="govuk-table__cell">@column</td>
                                }
                            </tr>
                        }
                    </tbody>
                </table>
            }


            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <form class="js-disable-on-submit" asp-action="EvaluatePage" asp-controller="RoatpGateway">
                        <input type="hidden" name="ApplicationId" value="@Model.ApplicationId" />
                        <input type="hidden" name="PageId" value="@Model.PageId" />

                        <div class="govuk-form-group">

                            <div class="govuk-radios govuk-radios--conditional" data-module="radios">
                                @{
                                    var radioCheckedPassed = Model.Value == Model.OptionPass.Value ? "checked" : "";
                                    var radioCheckedFailed = Model.Value == Model.OptionFail.Value ? "checked" : "";
                                    var radioCheckedInProgress = Model.Value == Model.OptionInProgress.Value ? "checked" : "";
                                    <div class="govuk-radios__item">

                                        
                                            <input class="govuk-radios__input"
                                                   type="radio"
                                                   id="@(Model.PageId)_1"
                                                   name="Value"
                                                   value="@Model.OptionPass.Value"
                                                   data-aria-controls="conditional-@(Model.PageId)_1"
                                                   @radioCheckedPassed />
                                        
                                        <label class="govuk-label govuk-radios__label" for="@(Model.PageId)_1">@Model.OptionPass.Label</label>
 
                                            <span id="@(Model.PageId)_1)-hint" class="govuk-hint govuk-radios__hint">
                                                @Html.Raw(Model.OptionPass.Heading)
                                            </span>
                                        
                                    </div>
                                    <textarea class="govuk-textarea govuk-!-margin-bottom-0 @isError"
              id="OptionPassText"
              name="OptionPassText"
              rows="5"
              maxlength="10000">@Model.OptionPassText</textarea>
                                    
                                    <div class="govuk-radios__item">

                                        
                                        <input class="govuk-radios__input"
                                               type="radio"
                                               id="@(Model.PageId)_2"
                                               name="Value"
                                               value="@Model.OptionFail.Value"
                                               data-aria-controls="conditional-@(Model.PageId)_2"
                                               @radioCheckedFailed />
                                        
                                        <label class="govuk-label govuk-radios__label" for="@(Model.PageId)_2">@Model.OptionFail.Label</label>
 
                                        <span id="@(Model.PageId)_2)-hint" class="govuk-hint govuk-radios__hint">
                                            @Html.Raw(Model.OptionFail.Heading)
                                        </span>
                                        
                                    </div>
                                    <textarea class="govuk-textarea govuk-!-margin-bottom-0 @isError"
              id="OptionFailText"
              name="OptionFailText"
              rows="5"
              maxlength="10000">@Model.OptionFailText</textarea>



                                    <div class="govuk-radios__item">

                                        
                                        <input class="govuk-radios__input"
                                               type="radio"
                                               id="@(Model.PageId)_3"
                                               name="Value"
                                               value="@Model.OptionInProgress.Value"
                                               data-aria-controls="conditional-@(Model.PageId)_3"
                                               @radioCheckedInProgress />
                                        
                                        <label class="govuk-label govuk-radios__label" for="@(Model.PageId)_3">@Model.OptionInProgress.Label</label>
 
                                        <span id="@(Model.PageId)_3)-hint" class="govuk-hint govuk-radios__hint">
                                            @Html.Raw(Model.OptionInProgress.Heading)
                                        </span>
                                        
                                    </div>
                                    <textarea class="govuk-textarea govuk-!-margin-bottom-0 @isError"
              id="OptionInProgressText"
              name="OptionInProgressText"
              rows="5"
              maxlength="10000">@Model.OptionInProgressText</textarea>
                                }
                            </div>
                        </div>

                        <button class="govuk-button" type="submit">Confirm and submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
